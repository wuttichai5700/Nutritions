<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      background: linear-gradient(to bottom, #dff2ff, #eef7fb);
      padding: 40px;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      background: #ffffff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    h2 {
      text-align: center;
      color: #1a5276;
    }
    select, button, input[type=number] {
      padding: 10px;
      font-size: 1rem;
      margin: 5px 5px 5px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      transition: background-color 0.3s ease;
      font-family: 'Kanit', sans-serif;
      cursor: pointer;
    }
    button:hover {
      background-color: #2980b9;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ccc;
    }
    th {
      background-color: #3498db;
      color: white;
    }
    tfoot td {
      font-weight: bold;
      background: #ecf0f1;
    }
    td button {
      background-color: #e74c3c;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }
    td button:hover {
      background-color: #c0392b;
    }
    #logo {
      display: block;
      margin: 0 auto 20px;
      max-width: 120px;
    }
    .warning {
      margin-top: 20px;
      padding: 15px;
      background: #fff3cd;
      border-left: 5px solid #ffc107;
      color: #856404;
      border-radius: 8px;
    }
    .goal-setting {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 15px;
    }
    .goal-setting .goal-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .goal-setting label {
      font-weight: bold;
      min-width: 160px;
    }
    @media print {
      label, select, button, td:last-child, th:last-child, .sodium-setting, .goal-setting { display: none !important; }
    }
  </style>
</head>
<body>
  <div class="container" id="pdfContent">
    <img id="logo" src="https://upload.wikimedia.org/wikipedia/commons/4/4a/Logo_2021.svg" alt="Logo">
    <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>

    <div class="goal-setting">
      <div class="goal-row">
        <label for="goalCarb">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ Carb (g):</label>
        <input type="number" id="goalCarb" value="300">
        <button onclick="saveGoal('Carb')">‚úîÔ∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
      </div>
      <div class="goal-row">
        <label for="goalProtein">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ Protein (g):</label>
        <input type="number" id="goalProtein" value="150">
        <button onclick="saveGoal('Protein')">‚úîÔ∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
      </div>
      <div class="goal-row">
        <label for="goalFat">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ Fat (g):</label>
        <input type="number" id="goalFat" value="70">
        <button onclick="saveGoal('Fat')">‚úîÔ∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
      </div>
    </div>

    <div class="sodium-setting">
      <label for="sodiumLimit">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (mg):</label>
      <input type="number" id="sodiumLimit" value="2000">
      <button onclick="saveSodiumLimit()">‚úîÔ∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
    </div>

    <label for="mealTime">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏∑‡πâ‡∏≠:</label>
    <select id="mealTime">
      <option value="‡πÄ‡∏ä‡πâ‡∏≤">‡πÄ‡∏ä‡πâ‡∏≤</option>
      <option value="‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á">‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á</option>
      <option value="‡πÄ‡∏¢‡πá‡∏ô">‡πÄ‡∏¢‡πá‡∏ô</option>
      <option value="‡∏î‡∏∂‡∏Å">‡∏î‡∏∂‡∏Å</option>
    </select>
    <label for="menuDropdown">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π:</label>
    <select id="menuDropdown">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>
      <option value="‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏≠‡∏Å‡πÑ‡∏Å‡πà">‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏≠‡∏Å‡πÑ‡∏Å‡πà</option>
      <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á">‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á</option>
      <option value="‡∏≠‡∏Å‡πÑ‡∏Å‡πà + ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°">‡∏≠‡∏Å‡πÑ‡∏Å‡πà + ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°</option>
      <option value="‡πÄ‡∏°‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏•‡∏≤‡∏ó‡∏π">‡πÄ‡∏°‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏•‡∏≤‡∏ó‡∏π</option>
      <option value="‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏Å‡πÑ‡∏Å‡πà">‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏Å‡πÑ‡∏Å‡πà</option>
      <option value="‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏´‡∏•‡πà‡∏≥">‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏´‡∏•‡πà‡∏≥</option>
      <option value="‡∏¢‡∏≥‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°">‡∏¢‡∏≥‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°</option>
      <option value="‡∏≠‡∏Å‡πÑ‡∏Å‡πà + ‡∏Å‡∏•‡πâ‡∏ß‡∏¢">‡∏≠‡∏Å‡πÑ‡∏Å‡πà + ‡∏Å‡∏•‡πâ‡∏ß‡∏¢</option>
      <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏°">‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏°</option>
      <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏≠‡∏Å‡πÑ‡∏Å‡πà">‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏≠‡∏Å‡πÑ‡∏Å‡πà</option>
      <option value="‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏≠‡∏°">‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏≠‡∏°</option>
      <option value="‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÇ‡∏≠‡∏£‡∏µ‡πÇ‡∏≠ 3 ‡πÅ‡∏ú‡πà‡∏ô">‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÇ‡∏≠‡∏£‡∏µ‡πÇ‡∏≠ 3 ‡πÅ‡∏ú‡πà‡∏ô</option>
      <option value="‡∏¢‡∏≥‡∏≠‡∏Å‡πÑ‡∏Å‡πà">‡∏¢‡∏≥‡∏≠‡∏Å‡πÑ‡∏Å‡πà</option>
      <option value="‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ">‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ</option>
    </select>
    <label for="menuDropdown">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π:</label>
    <select id="menuDropdown">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>
    </select>
    <button onclick="addSelectedMenu()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
    <button onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå</button>
    <button onclick="downloadPDF()">üìÑ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å PDF</button>

    <div id="mealTables"></div>
    <div class="warning" id="alerts"></div>
  </div>

  <script>
   const menuData = {"‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏≠‡∏Å‡πÑ‡∏Å‡πà": { carb: 44.2, protein: 64, fat: 21.1, sodium: 771, cal: 607 },
      "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á": { carb: 59.4, protein: 47.4, fat: 17.0, sodium: 686, cal: 715 },
      "‡∏≠‡∏Å‡πÑ‡∏Å‡πà + ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°": { carb: 2, protein: 44, fat: 5.5, sodium: 780, cal: 270 },
      "‡πÄ‡∏°‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏•‡∏≤‡∏ó‡∏π": { carb: 86.8, protein: 77.6, fat: 16.0, sodium: 1020, cal: 860 },
      "‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏Å‡πÑ‡∏Å‡πà": { carb: 0, protein: 66, fat: 7.5, sodium: 635, cal: 390 },
      "‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏´‡∏•‡πà‡∏≥": { carb: 30, protein: 32.1, fat: 10.0, sodium: 1011, cal: 339 },
      "‡∏¢‡∏≥‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°": { carb: 73.2, protein: 27.0, fat: 21.6, sodium: 265, cal: 585 },
      "‡∏≠‡∏Å‡πÑ‡∏Å‡πà + ‡∏Å‡∏•‡πâ‡∏ß‡∏¢": { carb: 8, protein: 44.0, fat: 5.2, sodium: 580, cal: 315 },
      "‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏°": { carb: 55, protein: 55, fat: 23.5, sodium: 585, cal: 700 },
      "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏≠‡∏Å‡πÑ‡∏Å‡πà": { carb: 76, protein: 86.8, fat: 20.4, sodium: 780, cal: 943 },
      "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÇ‡∏≠‡∏£‡∏µ‡πÇ‡∏≠ 3 ‡πÅ‡∏ú‡πà‡∏ô": { carb: 22, protein: 6, fat: 2, sodium: 280, cal: 140 },
      "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏≠‡∏°": { carb: 32, protein: 0, fat: 0.5, sodium: 0, cal: 132 },
      "‡∏¢‡∏≥‡∏≠‡∏Å‡πÑ‡∏Å‡πà": { carb: 0, protein: 44, fat: 6, sodium: 400, cal: 270 },
      "‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ": { carb: 12, protein: 8, fat: 4, sodium: 0, cal: 120 }};; // Add menu nutrition data here
    let meals = { "‡πÄ‡∏ä‡πâ‡∏≤": [], "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á": [], "‡πÄ‡∏¢‡πá‡∏ô": [], "‡∏î‡∏∂‡∏Å": [] };

    let sodiumLimit = localStorage.getItem("sodiumLimit") || 2000;
    let carbGoal = localStorage.getItem("carbGoal") || 300;
    let proteinGoal = localStorage.getItem("proteinGoal") || 150;
    let fatGoal = localStorage.getItem("fatGoal") || 70;

    document.getElementById("sodiumLimit").value = sodiumLimit;
    document.getElementById("goalCarb").value = carbGoal;
    document.getElementById("goalProtein").value = proteinGoal;
    document.getElementById("goalFat").value = fatGoal;

    function saveSodiumLimit() {
      sodiumLimit = parseInt(document.getElementById("sodiumLimit").value) || 2000;
      localStorage.setItem("sodiumLimit", sodiumLimit);
      renderTables();
    }

    function saveGoal(nutrient) {
      const id = `goal${nutrient}`;
      const value = parseInt(document.getElementById(id).value) || 0;
      localStorage.setItem(nutrient.toLowerCase() + 'Goal', value);
      if (nutrient === 'Carb') carbGoal = value;
      if (nutrient === 'Protein') proteinGoal = value;
      if (nutrient === 'Fat') fatGoal = value;
      renderTables();
    }

    function addSelectedMenu() {
      const menu = document.getElementById('menuDropdown').value;
      const meal = document.getElementById('mealTime').value;
      if (menu && !meals[meal].includes(menu)) {
        meals[meal].push(menu);
        renderTables();
      }
    }

    function removeMenu(meal, item) {
      meals[meal] = meals[meal].filter(name => name !== item);
      renderTables();
    }

    function renderTables() {
      const container = document.getElementById('mealTables');
      container.innerHTML = '';
      let total = { carb: 0, protein: 0, fat: 0, sodium: 0, cal: 0 };

      for (const meal in meals) {
        if (meals[meal].length === 0) continue;
        const table = document.createElement('table');
        const header = `<h3>‡∏°‡∏∑‡πâ‡∏≠${meal}</h3>`;
        table.innerHTML = `
          <thead><tr><th>‡πÄ‡∏°‡∏ô‡∏π</th><th>Carb</th><th>Protein</th><th>Fat</th><th>Sodium</th><th>Calories</th><th>‡∏•‡∏ö</th></tr></thead>
          <tbody>${meals[meal].map(name => {
            const d = menuData[name] || {carb:0, protein:0, fat:0, sodium:0, cal:0};
            total.carb += d.carb; total.protein += d.protein; total.fat += d.fat;
            total.sodium += d.sodium; total.cal += d.cal;
            return `<tr><td>${name}</td><td>${d.carb}</td><td>${d.protein}</td><td>${d.fat}</td><td>${d.sodium}</td><td>${d.cal}</td><td><button onclick="removeMenu('${meal}','${name}')">‚ùå</button></td></tr>`
          }).join('')}</tbody>`;
        container.innerHTML += header;
        container.appendChild(table);
      }

      const warnBox = document.getElementById('alerts');
      let alerts = [];
      if (total.sodium > sodiumLimit) alerts.push(`‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô ${sodiumLimit}mg`);
      if (total.carb > carbGoal) alerts.push(`Carb ‡πÄ‡∏Å‡∏¥‡∏ô ${carbGoal}g`);
      if (total.protein > proteinGoal) alerts.push(`Protein ‡πÄ‡∏Å‡∏¥‡∏ô ${proteinGoal}g`);
      if (total.fat > fatGoal) alerts.push(`Fat ‡πÄ‡∏Å‡∏¥‡∏ô ${fatGoal}g`);
      warnBox.innerHTML = alerts.length ? `‚ö†Ô∏è ${alerts.join(' | ')}` : '';
    }

    function downloadPDF() {
      const element = document.getElementById('pdfContent');
      const opt = {
        margin: 0.5,
        filename: 'nutrition-summary.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }
  </script>
</body>
</html>
